<div class="venta-container">
  <h2>Gesti√≥n de Ventas</h2>

  <form (ngSubmit)="agregarVenta()">
    <div>
      <label for="ventaId">Venta ID</label>
      <input type="number" id="ventaId" [(ngModel)]="venta.ventaId" name="ventaId" required />
    </div>

    <div>
      <label for="fechaVenta">Fecha de Venta</label>
      <input type="date" id="fechaVenta" [(ngModel)]="venta.fechaVenta" name="fechaVenta" required />
    </div>

    <div>
      <label for="clienteId">Cliente ID</label>
      <input type="number" id="clienteId" [(ngModel)]="venta.clienteId" name="clienteId" required />
    </div>

    <div *ngFor="let detalle of venta.detallesVenta; let i = index">
      <fieldset>
        <legend>Detalle de Venta {{ i + 1 }}</legend>

        <div>
          <label for="productoId">Producto ID</label>
          <input type="number" id="productoId" [(ngModel)]="detalle.productoId" name="productoId" required />
        </div>

        <div>
          <label for="cantidad">Cantidad</label>
          <input type="number" id="cantidad" [(ngModel)]="detalle.cantidad" name="cantidad" required />
        </div>

        <div>
          <label for="precioUnitario">Precio Unitario</label>
          <input type="number" id="precioUnitario" [(ngModel)]="detalle.precioUnitario" name="precioUnitario" required />
        </div>

        <button type="button" (click)="eliminarDetalle(i)">Eliminar Detalle</button>
      </fieldset>
    </div>

    <button type="button" (click)="agregarDetalle()">Agregar Detalle</button>

    <button type="submit">{{ isEdit ? 'Actualizar' : 'Agregar' }}</button>
    <button type="button" (click)="cancelarEdicion()" *ngIf="isEdit">Cancelar</button>
  </form>

  <ul>
    <li *ngFor="let venta of ventas">
      <span>{{ venta.ventaId }} - {{ venta.fechaVenta | date }} - {{ venta.clienteId }}</span>
      <ul>
        <li *ngFor="let detalle of venta.detallesVenta">
          {{ detalle.productoId }} - {{ detalle.cantidad }} - {{ detalle.precioUnitario }}
        </li>
      </ul>
      <button (click)="editarVenta(venta)">Editar</button>
      <button (click)="eliminarVenta(venta.ventaId)">Eliminar</button>
    </li>
  </ul>
</div>
